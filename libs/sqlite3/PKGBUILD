pkgname=switch-sqlite3
pkgver=3.49.2 
pkgrel=1
pkgdesc="SQlite 3"
url="https://sqlite.org/"
license=('Public Domain')
arch=('any')
options=(!strip libtool staticlibs)
groups=('switch-portlibs')
source=("${url}/2025/sqlite-autoconf-3510100.tar.gz")
sha256sums=(
  '4f2445cd70479724d32ad015ec7fd37fbb6f6130013bd4bfbc80c32beb42b7e0'
)


build() {

  
  cd "sqlite-autoconf-3510100"

  source ${DEVKITPRO}/switchvars.sh
  export CFLAGS="$CFLAGS -DSQLITE_DEBUG -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION=1 -DSQLITE_OMIT_WAL -DSQLITE_OS_OTHER"
  	
   ./configure --prefix="${PORTLIBS_PREFIX}" --disable-threadsafe --enable-static --disable-shared --disable-largefile --host=arm-noeabi-elf

  make libsqlite3.a
}

package() {
  cd "sqlite-autoconf-3510100"

  source /opt/devkitpro/switchvars.sh

  make DESTDIR="${pkgdir}" libsqlite3.a install-lib
}
